// While loops: basic loops, nested loops, early return, loop with variables.

// Simple countdown loop.
fn countdown(n: i32) -> i32 {
  var i: i32 = n;
  while (i > 0) {
    i = i - 1;
  }
  return i;
}

// Accumulate a sum in a loop.
fn sum_to(n: i32) -> i32 {
  var acc: i32 = 0;
  var i: i32 = 0;
  while (i < n) {
    acc = acc + i;
    i = i + 1;
  }
  return acc;
}

// While loop with boolean variable as condition.
fn bool_cond_loop(flag: bool) -> i32 {
  var count: i32 = 0;
  while (flag) {
    count = count + 1;
    return count;
  }
  return count;
}

// While loop that never executes (condition false initially).
fn never_runs() -> i32 {
  var x: i32 = 0;
  while (false) {
    x = 99;
  }
  return x;
}

// While with always-true condition and early return to break out.
fn early_return_in_loop(n: i32) -> i32 {
  var i: i32 = 0;
  while (true) {
    if (i > n) {
      return i;
    }
    i = i + 1;
  }
  return i;
}

// Nested while loops.
fn nested_loops(rows: i32, cols: i32) -> i32 {
  var total: i32 = 0;
  var r: i32 = 0;
  while (r < rows) {
    var c: i32 = 0;
    while (c < cols) {
      total = total + 1;
      c = c + 1;
    }
    r = r + 1;
  }
  return total;
}

// While loop followed by more code.
fn loop_then_compute(n: i32) -> i32 {
  var x: i32 = n;
  while (x > 10) {
    x = x - 10;
  }
  var result: i32 = x * 2;
  return result;
}

// Multiple sequential while loops.
fn two_loops(a: i32, b: i32) -> i32 {
  var x: i32 = a;
  while (x > 0) {
    x = x - 1;
  }
  var y: i32 = b;
  while (y > 0) {
    y = y - 1;
  }
  return x + y;
}

// While loop with complex condition expression.
fn complex_while_cond(a: i32, b: i32) -> i32 {
  var x: i32 = a;
  while (x * x < b) {
    x = x + 1;
  }
  return x;
}

// While loop body with if-else.
fn loop_with_branch(n: i32) -> i32 {
  var even_count: i32 = 0;
  var odd_count: i32 = 0;
  var i: i32 = 0;
  while (i < n) {
    // Simulate even/odd check: compare i*2/2 to i
    if (i > 5) {
      even_count = even_count + 1;
    } else {
      odd_count = odd_count + 1;
    }
    i = i + 1;
  }
  return even_count + odd_count;
}

// Void function with a while loop.
fn void_loop(n: i32) {
  var i: i32 = 0;
  while (i < n) {
    i + 1;
    i = i + 1;
  }
}

// While loop where condition involves a function call.
fn above_threshold(x: i32) -> bool {
  return x > 10;
}

fn loop_with_call_cond(start: i32) -> i32 {
  var x: i32 = start;
  while (above_threshold(x)) {
    x = x - 1;
  }
  return x;
}

// Loop with variable reassigned multiple times per iteration.
fn multi_assign_loop(n: i32) -> i32 {
  var x: i32 = 0;
  var i: i32 = 0;
  while (i < n) {
    x = x + 1;
    x = x * 2;
    x = x - 1;
    i = i + 1;
  }
  return x;
}

// Deeply nested loops (three levels).
fn triple_nested(a: i32, b: i32, c: i32) -> i32 {
  var count: i32 = 0;
  var i: i32 = 0;
  while (i < a) {
    var j: i32 = 0;
    while (j < b) {
      var k: i32 = 0;
      while (k < c) {
        count = count + 1;
        k = k + 1;
      }
      j = j + 1;
    }
    i = i + 1;
  }
  return count;
}
